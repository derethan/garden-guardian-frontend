import{k as R,aq as fe,ar as me,_ as m,F as te,as as ge,f as N,g as W,C as T,j as o,s as E,J as ne,A as M,ak as G,aj as V,e as x,I as he,l as oe,m as H,y as F,V as B,at as xe,ah as q,ap as ve,h as se,a as re,U as Ce,au as we,B as I,T as S,G as O,D as ye,c as ae,o as be,p as ke,Z as Se}from"./index-DZdXfw6U.js";import{C as _,a as je}from"./Container-5h85fXWK.js";import{P as ie}from"./PrimaryButton-JCouQOO7.js";import{u as Pe}from"./useValidate-RwioX9Fb.js";import{T as X}from"./TextField-LWE3Q9Nf.js";import{c as Ee}from"./index-heyL2BQW.js";import{C as Ae}from"./Close-FpsiBrco.js";import"./Button-QianI3wS.js";import"./Select-EfYF4M4T.js";const Re=["className","elementType","ownerState","externalForwardedProps","getSlotOwnerState","internalForwardedProps"],Me=["component","slots","slotProps"],Oe=["component"];function Z(e,t){const{className:s,elementType:n,ownerState:r,externalForwardedProps:d,getSlotOwnerState:u,internalForwardedProps:p}=t,g=R(t,Re),{component:v,slots:f={[e]:void 0},slotProps:h={[e]:void 0}}=d,k=R(d,Me),w=f[e]||n,l=fe(h[e],r),i=me(m({className:s},g,{externalForwardedProps:e==="root"?k:void 0,externalSlotProps:l})),{props:{component:y},internalRef:a}=i,c=R(i.props,Oe),C=te(a,l==null?void 0:l.ref,t.ref),b=u?u(c):{},j=m({},r,b),A=e==="root"?y||v:y,P=ge(w,m({},e==="root"&&!v&&!f[e]&&p,e!=="root"&&!f[e]&&p,c,A&&{as:A},{ref:C}),j);return Object.keys(b).forEach(L=>{delete P[L]}),[w,P]}function Le(e){return W("MuiAlert",e)}const Ie=N("MuiAlert",["root","action","icon","message","filled","colorSuccess","colorInfo","colorWarning","colorError","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),K=Ie,Te=T(o.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),ze=T(o.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),De=T(o.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),$e=T(o.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),Be=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],Fe=Ee(),Ne=e=>{const{variant:t,color:s,severity:n,classes:r}=e,d={root:["root",`color${M(s||n)}`,`${t}${M(s||n)}`,`${t}`],icon:["icon"],message:["message"],action:["action"]};return H(d,Le,r)},We=E(ne,{name:"MuiAlert",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`${s.variant}${M(s.color||s.severity)}`]]}})(({theme:e})=>{const t=e.palette.mode==="light"?G:V,s=e.palette.mode==="light"?V:G;return m({},e.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px",variants:[...Object.entries(e.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"standard"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),backgroundColor:e.vars?e.vars.palette.Alert[`${n}StandardBg`]:s(e.palette[n].light,.9),[`& .${K.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(([,n])=>n.main&&n.light).map(([n])=>({props:{colorSeverity:n,variant:"outlined"},style:{color:e.vars?e.vars.palette.Alert[`${n}Color`]:t(e.palette[n].light,.6),border:`1px solid ${(e.vars||e).palette[n].light}`,[`& .${K.icon}`]:e.vars?{color:e.vars.palette.Alert[`${n}IconColor`]}:{color:e.palette[n].main}}})),...Object.entries(e.palette).filter(([,n])=>n.main&&n.dark).map(([n])=>({props:{colorSeverity:n,variant:"filled"},style:m({fontWeight:e.typography.fontWeightMedium},e.vars?{color:e.vars.palette.Alert[`${n}FilledColor`],backgroundColor:e.vars.palette.Alert[`${n}FilledBg`]}:{backgroundColor:e.palette.mode==="dark"?e.palette[n].dark:e.palette[n].main,color:e.palette.getContrastText(e.palette[n].main)})}))]})}),He=E("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(e,t)=>t.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),_e=E("div",{name:"MuiAlert",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),Y=E("div",{name:"MuiAlert",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),J={success:o.jsx(Te,{fontSize:"inherit"}),warning:o.jsx(ze,{fontSize:"inherit"}),error:o.jsx(De,{fontSize:"inherit"}),info:o.jsx($e,{fontSize:"inherit"})},Ue=x.forwardRef(function(t,s){const n=Fe({props:t,name:"MuiAlert"}),{action:r,children:d,className:u,closeText:p="Close",color:g,components:v={},componentsProps:f={},icon:h,iconMapping:k=J,onClose:w,role:l="alert",severity:i="success",slotProps:y={},slots:a={},variant:c="standard"}=n,C=R(n,Be),b=m({},n,{color:g,severity:i,variant:c,colorSeverity:g||i}),j=Ne(b),A={slots:m({closeButton:v.CloseButton,closeIcon:v.CloseIcon},a),slotProps:m({},f,y)},[P,L]=Z("closeButton",{elementType:he,externalForwardedProps:A,ownerState:b}),[z,D]=Z("closeIcon",{elementType:Ae,externalForwardedProps:A,ownerState:b});return o.jsxs(We,m({role:l,elevation:0,ownerState:b,className:oe(j.root,u),ref:s},C,{children:[h!==!1?o.jsx(He,{ownerState:b,className:j.icon,children:h||k[i]||J[i]}):null,o.jsx(_e,{ownerState:b,className:j.message,children:d}),r!=null?o.jsx(Y,{ownerState:b,className:j.action,children:r}):null,r==null&&w?o.jsx(Y,{ownerState:b,className:j.action,children:o.jsx(P,m({size:"small","aria-label":p,title:p,color:"inherit",onClick:w},L,{children:o.jsx(z,m({fontSize:"small"},D))}))}):null]}))}),Ge=Ue;function Q(e){return e.substring(2).toLowerCase()}function Ve(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function qe(e){const{children:t,disableReactTree:s=!1,mouseEvent:n="onClick",onClickAway:r,touchEvent:d="onTouchEnd"}=e,u=x.useRef(!1),p=x.useRef(null),g=x.useRef(!1),v=x.useRef(!1);x.useEffect(()=>(setTimeout(()=>{g.current=!0},0),()=>{g.current=!1}),[]);const f=te(t.ref,p),h=F(l=>{const i=v.current;v.current=!1;const y=B(p.current);if(!g.current||!p.current||"clientX"in l&&Ve(l,y))return;if(u.current){u.current=!1;return}let a;l.composedPath?a=l.composedPath().indexOf(p.current)>-1:a=!y.documentElement.contains(l.target)||p.current.contains(l.target),!a&&(s||!i)&&r(l)}),k=l=>i=>{v.current=!0;const y=t.props[l];y&&y(i)},w={ref:f};return d!==!1&&(w[d]=k(d)),x.useEffect(()=>{if(d!==!1){const l=Q(d),i=B(p.current),y=()=>{u.current=!0};return i.addEventListener(l,h),i.addEventListener("touchmove",y),()=>{i.removeEventListener(l,h),i.removeEventListener("touchmove",y)}}},[h,d]),n!==!1&&(w[n]=k(n)),x.useEffect(()=>{if(n!==!1){const l=Q(n),i=B(p.current);return i.addEventListener(l,h),()=>{i.removeEventListener(l,h)}}},[h,n]),o.jsx(x.Fragment,{children:x.cloneElement(t,w)})}function Xe(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:s=!1,onClose:n,open:r,resumeHideDuration:d}=e,u=xe();x.useEffect(()=>{if(!r)return;function a(c){c.defaultPrevented||(c.key==="Escape"||c.key==="Esc")&&(n==null||n(c,"escapeKeyDown"))}return document.addEventListener("keydown",a),()=>{document.removeEventListener("keydown",a)}},[r,n]);const p=F((a,c)=>{n==null||n(a,c)}),g=F(a=>{!n||a==null||u.start(a,()=>{p(null,"timeout")})});x.useEffect(()=>(r&&g(t),u.clear),[r,t,g,u]);const v=a=>{n==null||n(a,"clickaway")},f=u.clear,h=x.useCallback(()=>{t!=null&&g(d??t*.5)},[t,d,g]),k=a=>c=>{const C=a.onBlur;C==null||C(c),h()},w=a=>c=>{const C=a.onFocus;C==null||C(c),f()},l=a=>c=>{const C=a.onMouseEnter;C==null||C(c),f()},i=a=>c=>{const C=a.onMouseLeave;C==null||C(c),h()};return x.useEffect(()=>{if(!s&&r)return window.addEventListener("focus",h),window.addEventListener("blur",f),()=>{window.removeEventListener("focus",h),window.removeEventListener("blur",f)}},[s,r,h,f]),{getRootProps:(a={})=>{const c=m({},q(e),q(a));return m({role:"presentation"},a,c,{onBlur:k(c),onFocus:w(c),onMouseEnter:l(c),onMouseLeave:i(c)})},onClickAway:v}}function Ze(e){return W("MuiSnackbarContent",e)}N("MuiSnackbarContent",["root","message","action"]);const Ke=["action","className","message","role"],Ye=e=>{const{classes:t}=e;return H({root:["root"],action:["action"],message:["message"]},Ze,t)},Je=E(ne,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,s=ve(e.palette.background.default,t);return m({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(s),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:s,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),Qe=E("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),et=E("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),tt=x.forwardRef(function(t,s){const n=se({props:t,name:"MuiSnackbarContent"}),{action:r,className:d,message:u,role:p="alert"}=n,g=R(n,Ke),v=n,f=Ye(v);return o.jsxs(Je,m({role:p,square:!0,elevation:6,className:oe(f.root,d),ownerState:v,ref:s},g,{children:[o.jsx(Qe,{className:f.message,ownerState:v,children:u}),r?o.jsx(et,{className:f.action,ownerState:v,children:r}):null]}))}),nt=tt;function ot(e){return W("MuiSnackbar",e)}N("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const st=["onEnter","onExited"],rt=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],at=e=>{const{classes:t,anchorOrigin:s}=e,n={root:["root",`anchorOrigin${M(s.vertical)}${M(s.horizontal)}`]};return H(n,ot,t)},ee=E("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[`anchorOrigin${M(s.anchorOrigin.vertical)}${M(s.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const s={left:"50%",right:"auto",transform:"translateX(-50%)"};return m({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:m({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&s,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),it=x.forwardRef(function(t,s){const n=se({props:t,name:"MuiSnackbar"}),r=re(),d={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{action:u,anchorOrigin:{vertical:p,horizontal:g}={vertical:"bottom",horizontal:"left"},autoHideDuration:v=null,children:f,className:h,ClickAwayListenerProps:k,ContentProps:w,disableWindowBlurListener:l=!1,message:i,open:y,TransitionComponent:a=we,transitionDuration:c=d,TransitionProps:{onEnter:C,onExited:b}={}}=n,j=R(n.TransitionProps,st),A=R(n,rt),P=m({},n,{anchorOrigin:{vertical:p,horizontal:g},autoHideDuration:v,disableWindowBlurListener:l,TransitionComponent:a,transitionDuration:c}),L=at(P),{getRootProps:z,onClickAway:D}=Xe(m({},P)),[le,U]=x.useState(!0),ce=Ce({elementType:ee,getSlotProps:z,externalForwardedProps:A,ownerState:P,additionalProps:{ref:s},className:[L.root,h]}),de=$=>{U(!0),b&&b($)},ue=($,pe)=>{U(!1),C&&C($,pe)};return!y&&le?null:o.jsx(qe,m({onClickAway:D},k,{children:o.jsx(ee,m({},ce,{children:o.jsx(a,m({appear:!0,in:y,timeout:c,direction:p==="top"?"down":"up",onEnter:ue,onExited:de},j,{children:f||o.jsx(nt,m({message:i,action:u},w))}))}))}))}),lt=it,ct=({user:e,isMobile:t})=>{const s={"Full Name":e.name,"Email Address":e.email,"Your location":e.location?e.location:"location Not Set"};return o.jsx(_,{maxWidth:"lg",sx:{mt:4},children:o.jsxs(I,{sx:{backgroundColor:"background.lightGrey",padding:"1rem"},children:[o.jsx(S,{variant:"h5",fontWeight:"bold",children:"Profile Information"}),o.jsx(O,{container:!0,spacing:3,sx:{mt:2},children:Object.keys(s).map(n=>o.jsxs(O,{item:!0,xs:12,md:4,sx:{display:"flex",flexDirection:{xs:"column",md:"row"},justifyContent:"center"},children:[o.jsxs(I,{sx:{display:"flex",flexDirection:"column",gap:1,ml:t?0:"auto",mr:t?0:"auto"},children:[o.jsx(S,{variant:"body1",color:"primary.secondary",fontWeight:"bold",children:n}),o.jsx(S,{variant:"subtitle2",color:"text.secondary",fontWeight:"bold",children:s[n]})]}),Object.keys(s).indexOf(n)!==Object.keys(s).length-1&&o.jsx(ye,{orientation:t?"horizontal":"vertical",flexItem:!0,sx:{mt:t?2:0,mb:t?2:0,ml:t?0:"auto"}})]},n))})]})})},dt=()=>{const{user:e}=ae(),{postMessage:t,setPostMessage:s,postData:n}=be(),[r,d]=x.useState({password:"",newPassword:""}),[u,p]=x.useState({open:!1,horizontal:"right",vertical:"bottom"}),[g,v,f]=Pe(r),h=w=>{f({});const{name:l,value:i}=w.target;d({...r,[l]:i})},k=w=>{if(w.preventDefault(),e.email==="demo"){f({password:"Password cannot be changed on a demo account"});return}if(v()){if(r.password===r.newPassword){f({password:"New password cannot be the same as the old password",newPassword:"New password cannot be the same as the old password"});return}n("https://api.gardenguardian.app:8443/"+"users/changePassword",r).then(i=>{if(i.status===401){f({password:i.message});return}i.status===200&&s(i.message),d({password:"",newPassword:""}),p({...u,open:!0})})}else console.log("Form is invalid")};return o.jsxs(_,{maxWidth:"lg",sx:{mt:4},children:[o.jsxs(I,{sx:{backgroundColor:"background.lightGrey",padding:"1rem"},children:[o.jsx(S,{variant:"h5",fontWeight:"bold",children:"Account Settings"}),o.jsx(O,{container:!0,spacing:3,sx:{mt:2},children:o.jsxs(O,{item:!0,xs:12,md:12,sx:{display:"flex",flexDirection:"column",justifyContent:"space-evenly",alignItems:"center"},children:[o.jsx(S,{variant:"body2",color:"text.secondary",fontWeight:"bold",children:"Change Password"}),o.jsxs(I,{type:"form",component:"form",noValidate:!0,autoComplete:"false",sx:{display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",gap:"1rem",pt:2},onSubmit:k,children:[o.jsx(X,{type:"password",name:"password",label:"Password",autoComplete:"off",value:r.password,onChange:h,placeholder:"Current Password",color:"primary",size:"small",variant:"outlined",sx:{backgroundColor:"background.lightGrey",width:{xs:"100%",sm:"300px"}},error:!!g.password,helperText:g.password}),o.jsx(X,{type:"password",name:"newPassword",label:"New Password",value:r.newPassword,onChange:h,placeholder:"New Password",color:"primary",size:"small",variant:"outlined",sx:{backgroundColor:"background.lightGrey",width:{xs:"100%",md:"300px"}},error:!!g.newPassword,helperText:g.newPassword}),o.jsx(ie,{type:"submit",text:"Change Password"})]})]})})]}),o.jsx(lt,{anchorOrigin:{vertical:u.vertical,horizontal:u.horizontal},open:u.open,autoHideDuration:6e3,onClose:()=>p({...u,open:!1}),children:o.jsx(Ge,{onClose:()=>p({...u,open:!1}),severity:"success",variant:"filled",sx:{width:"100%"},children:t})})]})},ut=({device:e})=>{const{isDeviceActive:t}=ke(),[s,n]=x.useState(!1);return x.useEffect(()=>{(async()=>{const d=await t(e);n(d)})()},[e,t]),o.jsx(O,{item:!0,xs:10,sm:6,md:4,sx:{display:"flex",justifyContent:"center",alignItems:"center"},children:o.jsxs(je,{variant:"light",sx:{p:2,borderRadius:4,width:"100%"},children:[o.jsx(S,{variant:"h6",fontWeight:"bold",children:e.deviceID}),o.jsxs(S,{variant:"body2",color:"grey",children:["Status:"," ",o.jsx(S,{component:"span",sx:{color:s?"green":"red"},children:s?"Online":"Offline"})]}),o.jsx(ie,{text:"Remove"})]})})},pt=({hasDevice:e,devices:t})=>o.jsx(_,{maxWidth:"lg",sx:{mt:4},children:o.jsxs(I,{sx:{padding:"1rem"},children:[o.jsx(S,{variant:"h5",fontWeight:"bold",children:"Linked Devices"}),e?o.jsx(O,{container:!0,spacing:2,sx:{mt:2,justifyContent:"center",alignItems:"center"},children:t.map(s=>o.jsx(ut,{device:s},s.deviceID))}):o.jsx(S,{variant:"body1",sx:{mt:2},children:"No devices linked"})]})}),bt=()=>{const e=re(),t=Se(e.breakpoints.down("md")),{user:s,hasDevice:n,devices:r}=ae();return o.jsxs(o.Fragment,{children:[o.jsx(ct,{user:s,isMobile:t}),o.jsx(dt,{user:s,isMobile:t}),o.jsx(pt,{hasDevice:n,devices:r})]})};export{bt as default};
